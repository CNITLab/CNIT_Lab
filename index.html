<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SoftKnit Lab @ ISTA</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    @media (max-width: 1300px) {
      /* Hide all absolutely positioned containers in carousel-text */
      .carousel-text [style*="position: absolute"],
      .carousel-text > [style*="position: absolute"] {
        display: none !important;
      }
      /* Hide all images in carousel-text whose src contains 'gif' or 'cartoon' (case-insensitive) */
      .carousel-text img[src*="gif" i],
      .carousel-text img[src*="cartoon" i] {
        display: none !important;
      }
    }
    .navbar, .navbar h1, .navbar nav a {
      color: #fff !important;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      right: 0;
      left: auto;
      background: #1e293b;
      border-radius: 0 0 12px 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.12);
      padding: 1em 1.5em;
      z-index: 100;
      min-width: 180px;
      max-width: 90vw;
      flex-direction: column;
      gap: 0.5em;
      overflow-x: auto;
      opacity: 0;
      transform: translateY(-20px) scale(0.98);
      pointer-events: none;
      transition: opacity 0.4s cubic-bezier(.5,1.5,.5,1), transform 0.4s cubic-bezier(.5,1.5,.5,1);
    }
    .dropdown-menu.show {
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: auto;
      transition: opacity 0.4s cubic-bezier(.5,1.5,.5,1), transform 0.4s cubic-bezier(.5,1.5,.5,1);
    }
    .menu-toggle[aria-expanded="true"] .hamburger-line {
      background: #1e40af;
    }
    body.fade-out {
      opacity: 0;
      transform: scale(0.98);
      filter: blur(2px);
      transition: opacity 0.8s cubic-bezier(.7,.2,.3,1), transform 0.8s cubic-bezier(.7,.2,.3,1), filter 0.8s cubic-bezier(.7,.2,.3,1);
    }
    body.fade-in {
      opacity: 1;
      transform: scale(1);
      filter: blur(0px);
      transition: opacity 0.8s cubic-bezier(.7,.2,.3,1), transform 0.8s cubic-bezier(.7,.2,.3,1), filter 0.8s cubic-bezier(.7,.2,.3,1);
    }
    html, body {
      height: 100vh;
      min-height: 100vh;
      overflow: hidden;
    }
    .scroll-container {
      position: relative;
      height: 100vh;
      overflow-y: auto;
      z-index: 0;
    }
  </style>
  <style>
    .hero-index {
      text-align: center;
      margin-top: 4.5rem;
      margin-bottom: 2.5rem;
      animation: heroFadeIn 1.2s cubic-bezier(.5,1.5,.5,1) both;
      position: relative;
      z-index: 2;
    }
    @keyframes heroFadeIn {
      from { opacity: 0; transform: translateY(-40px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .hero-index h1 {
      font-size: 6rem !important;
      color: #ffffff;
      letter-spacing: 0.01em;
      text-shadow: 0 2px 12px #1b7c4b, 0 2px 12px #000;
      animation: textPop 1.2s cubic-bezier(.5,1.5,.5,1) 0.2s both;
    }
    .hero-index p {
      font-size: 0.9rem;
      color: #fff;
      margin-top: 0.7em;
      opacity: 0.95;
      text-shadow: 0 2px 8px #1b7c4b, 0 1px 4px #000;
      animation: textPop 1.2s cubic-bezier(.5,1.5,.5,1) 0.4s both;
    }
    @keyframes textPop {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .floating-molecule-index {
      position: absolute;
      z-index: 1;
      opacity: 0.13;
      pointer-events: none;
      animation: floatmolindex 8s ease-in-out infinite alternate;
    }
    .floating-molecule-index.mol1 {
      top: 2vw; left: 4vw; width: 90px; animation-delay: 0s;
    }
    .floating-molecule-index.mol2 {
      top: 12vw; right: 6vw; width: 70px; animation-delay: 2s;
    }
    .floating-molecule-index.mol3 {
      bottom: 8vw; left: 10vw; width: 60px; animation-delay: 1.5s;
    }
    @keyframes floatmolindex {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(18px) rotate(8deg); }
    }
    .welcome-block {
      animation: fadeInUp 1.2s 0.7s both;
      position: relative;
      z-index: 2;
    }
    body.fade-out {
      opacity: 0;
      transition: opacity 0.5s cubic-bezier(.5,1.5,.5,1);
    }
    body.fade-in {
      opacity: 1;
      transition: opacity 0.7s cubic-bezier(.5,1.5,.5,1);
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .carousel-section {
      animation: fadeInUp 1.2s 1.1s both;
      position: relative;
      z-index: 2;
    }
    .carousel-card {
      position: relative;
      overflow: visible;
      background: #111;
      border-radius: 28px;
      box-shadow: 0 4px 32px #1b7c4b33, 0 2px 12px #000a;
      border-left: 8px solid #1b7c4b;
      border-right: 2px solid #1b7c4b;
      padding: 2.5em 0 2.5em 0;
      margin: 2em auto;
      min-height: 500px;
      max-width: 1200px;
      width: 100%;
    }
    .carousel-text {
      opacity: 0;
      position: absolute;
      left: 0; right: 0; top: 0;
      pointer-events: none;
      background: transparent;
      border-radius: 0;
      box-shadow: none;
      border: none;
      color: #fff;
      padding: 0;
      max-width: 100%;
      width: 100%;
      margin: 0 auto;
      filter: blur(8px) brightness(0.7);
      transform: translateY(60px) scale(0.92) rotateY(40deg);
      transition: opacity 0.7s cubic-bezier(.5,1.5,.5,1), filter 0.7s cubic-bezier(.5,1.5,.5,1), transform 0.7s cubic-bezier(.5,1.5,.5,1);
    }
    .carousel-text.active {
      opacity: 1;
      position: relative;
      filter: blur(0px) brightness(1);
      transform: translateY(0) scale(1.04) rotateY(0deg);
      pointer-events: auto;
      z-index: 2;
      animation: carouselIn 1.1s cubic-bezier(.5,1.5,.5,1);
    }
    .carousel-text.out {
      opacity: 0;
      filter: blur(12px) brightness(0.5);
      transform: translateY(-60px) scale(0.92) rotateY(-40deg);
      pointer-events: none;
      z-index: 1;
      animation: carouselOut 0.7s cubic-bezier(.5,1.5,.5,1);
    }
    @keyframes carouselIn {
      0% {
        opacity: 0;
        filter: blur(12px) brightness(0.5);
        transform: translateY(60px) scale(0.92) rotateY(40deg);
      }
      60% {
        filter: blur(2px) brightness(1.1);
        transform: translateY(-10px) scale(1.08) rotateY(-8deg);
      }
      100% {
        opacity: 1;
        filter: blur(0px) brightness(1);
        transform: translateY(0) scale(1.04) rotateY(0deg);
      }
    }
    @keyframes carouselOut {
      0% {
        opacity: 1;
        filter: blur(0px) brightness(1);
        transform: translateY(0) scale(1.04) rotateY(0deg);
      }
      100% {
        opacity: 0;
        filter: blur(12px) brightness(0.5);
        transform: translateY(-60px) scale(0.92) rotateY(-40deg);
      }
    }
    .carousel-dot {
      width: 12px; height: 12px; border-radius: 50%; background: #e6f4ea; border: 2px solid #1b7c4b; margin: 0 4px; display: inline-block; transition: background 0.3s, border 0.3s;
    }
    .carousel-dot.active {
      background: #1b7c4b;
      border: 2px solid #e6f4ea;
    }
    .menu-toggle {
      transition: transform 0.3s cubic-bezier(.5,1.5,.5,1);
    }
    .menu-toggle:active {
      transform: scale(1.1) rotate(8deg);
    }
    .dropdown-menu a {
      color: #fff !important;
    }
    /* Removed duplicate dropdown-menu rules above. JS for fade-in/out remains below. */
    .background, .background-static {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 100vw;
      height: 100vh;
      z-index: -2;
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }
    .background {
      background-image: url('images/welcome_background.gif');
    }
    .background-static {
      background-image: url('images/static_background.png');
    }
  </style>
</head>
<body class="index-page">
  <div class="background"></div>
  <div class="background-static" style="display:none;"></div>
  <img class="floating-molecule-index mol1" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Benzol.svg" alt="Molecule SVG" />
  <img class="floating-molecule-index mol2" src="images/Mock_cartoon_1.png" alt="Cartoon 1" />
  <img class="floating-molecule-index mol3" src="images/Mock_cartoon_2.png" alt="Cartoon 2" />
  <div class="menu-container floating-menu">
    <button class="menu-toggle" onclick="toggleMenu()">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    <nav class="dropdown-menu">
      <a href="index.html">Home</a>
      <a href="research.html">Research</a>
      <a href="group.html">People</a>
      <a href="publications.html">Publications</a>
      <a href="news.html">News</a>
      <a href="culture.html">Culture</a>
      <a href="positions.html">Open Positions</a>
    </nav>
  </div>

  <div class="scroll-container">
    <div class="hero-index">
      <h1>Chemistry with Intent: Adaptive Responses from Molecule to Material</h1>
  
    </div>
    <div class="content">
      <main>
      <div class="welcome-block">
        <div style="background: #111; border-radius: 28px; box-shadow: 0 4px 32px #1b7c4b33, 0 2px 12px #000a; border-left: 8px solid #1b7c4b; border-right: 2px solid #1b7c4b; padding: 2.5em 2vw 2.5em 2vw; max-width: 1200px; width: 100%; margin: 2em auto; color: #fff; position: relative; z-index: 3; text-align: center; font-family: 'Segoe UI', 'Arial', sans-serif; letter-spacing: 0.01em; text-shadow: 0 2px 12px #1b7c4b, 0 2px 12px #000; font-weight: 600;">
          <h2 style="color: #1b7c4b; margin-bottom: 0.7em; font-size: 3rem;">SoftKnit Lab<br>Knitting Molecular Function Across Scales</h2>
          <p style="color: #fff; font-size: 1.2rem; margin-top: 0;">Our research at the SoftKnit Lab at ISTA bridges organic chemistry and materials science to engineer responsive systems that exhibit purposeful behavior taking molecular functions to macroscopic scales. Our goal is to “knit” chemistry, molecular assembly, materials geometry, and stimuli-responses together into adaptive systems.</p>
        </div>
      </div>
      <section class="carousel-section">
        <div class="carousel-card" style="max-width: 1600px; width: 100%; position: relative; z-index: 2;">
          <div class="carousel-text active" style="position: relative; display: flex; flex-direction: row; justify-content: center; align-items: stretch;">
            <!-- Cartoon absolutely positioned on the far left, not affecting centering -->
            <div style="position: absolute; left: -50px; top:70%; transform: translateY(-50%); z-index: 2; width: 330px; height: auto; display: flex; align-items: center; justify-content: flex-end; pointer-events: none;">
              <img src="images/sec1_Cartoon.png" alt="Section 1 Cartoon" style="max-width: 330px; width: 220px; height: auto; background: none; border-radius: 0; box-shadow: none; display: block; margin: auto 0;" />
            </div>
            <!-- Centered text box -->
            <div style="margin: 0 auto; display: flex; flex-direction: column; align-items: center; justify-content: center; max-width: 900px; width: 100%;">
              <h3 style="margin-bottom: 0.7em; text-align: center; width: 100%; font-size: 3rem; color: #1b7c4b; font-family: 'Segoe UI', 'Arial', sans-serif; letter-spacing: 0.01em; text-shadow: 0 2px 12px #1b7c4b, 0 2px 12px #000; font-weight: 600;">From Structure to Mechanistic Insight</h3>
              <div style="width: 100%; max-width: 1200px; display: flex; justify-content: center; margin-bottom: 1em;">
                <div style="display: flex; justify-content: center; width: 100%;">
                  <img src="images/sec1_gif.gif" alt="Section 1 Animation" style="display: block; width: 440px; height: 190px; object-fit: cover; object-position: center -55px; border-radius: 80%/45%; filter: blur(1px) drop-shadow(0 0 3px #1b7c4b22); box-shadow: 0 2px 8px #1b7c4b22; border: 2px solid rgba(30,64,175,0.07); background: none; margin: 0 auto;" />
                </div>
              </div>
              <p style="text-align: justify; width: 100%; max-width: 1200px; font-size: 1.2rem;">Through the tools of physical organic and synthetic chemistry, we uncover the mechanistic underpinnings of stimuli-responsive molecular systems. Visible light-responsive molecules are especially compelling for their non-invasive activation and their suitability for biologically and technologically relevant environments.</p>
            </div>
          </div>
          <div class="carousel-text">
            <div style="margin: 0 auto; display: flex; flex-direction: column; align-items: center; justify-content: center; max-width: 900px; width: 100%;">
              <h3 style="margin-bottom: 0.7em; text-align: center; width: 100%; font-size: 3rem; color: #1b7c4b; font-family: 'Segoe UI', 'Arial', sans-serif; letter-spacing: 0.01em; text-shadow: 0 2px 12px #1b7c4b, 0 2px 12px #000; font-weight: 600;">
                From Molecules to Functional Matter
              </h3>
              <div style="width: 100%; max-width: 1200px; display: flex; justify-content: center; margin-bottom: 1em;">
                <!-- Add any images here if needed -->
              </div>
              <p style="text-align: justify; width: 100%; max-width: 1200px; font-size: 1.2rem;">
                We translate molecular responsiveness into material performance by guiding how molecules organize, interact, and transform. Through this bottom-up design, emergent properties such as phase change and mechanical adaptation become accessible and tunable.
              </p>
            </div>
            <!-- Cartoon absolutely positioned on the far left -->
            <div style="position: absolute; left: -25px; top:60%; transform: translateY(-50%); z-index: 0; width: 300px; height: 300px; display: flex; align-items: center; justify-content: flex-end; pointer-events: none;">
              <img src="images/Sec2.gif" alt="Section 2 Animation" style="max-width: 600px; width: 220px; height: 220px; object-fit: cover; object-position: -80px 0px; background: none; border-radius: 50%; box-shadow: none; display: block; margin: auto 0;" />
            </div>
            <!-- Cartoon absolutely positioned on the far right -->
            <div style="position: absolute; right: -100px; top:70%; transform: translateY(-50%); z-index: 2; width: 430px; height: auto; display: flex; align-items: center; justify-content: flex-start; pointer-events: none;">
              <img src="images/sec2_gif2.gif" alt="Section 2 Cartoon" style="max-width: 430px; width: 300px; height: 325; background: none; border-radius: 0; box-shadow: none; display: block; margin: auto 0; object-fit: cover; object-position: -35px -10px;" />
            </div>
          </div>
          <div class="carousel-text">
            <div style="position: relative; display: flex; flex-direction: row; justify-content: center; align-items: stretch; width: 100%; max-width: 900px; margin: 0 auto;">
              <!-- Cartoon absolutely positioned on the far left -->
              <div style="position: absolute; left: -500px; top:50%; transform: translateY(-50%); z-index: 0; width: 500px; height: 500px; display: flex; align-items: center; justify-content: flex-end; pointer-events: none;">
                <img src="images/Sec3.gif" alt="Section 3 Animation" style="max-width: 350px; width: 300px; height: 375px; object-fit: cover; object-position: -180px -10px; background: none; border-radius: 50%; box-shadow: 0 2px 8px #1b7c4b22; border: 2px solid rgba(30,64,175,0.07); display: block; margin: auto 0;" />
              </div>
              <!-- Centered text box -->
              <div style="margin: 0 auto; display: flex; flex-direction: column; align-items: center; justify-content: center; max-width: 900px; width: 100%;">
                <h3 style="margin-bottom: 0.7em; text-align: center; width: 100%; font-size: 3rem; color: #1b7c4b; font-family: 'Segoe UI', 'Arial', sans-serif; letter-spacing: 0.01em; text-shadow: 0 2px 12px #1b7c4b, 0 2px 12px #000; font-weight: 600;">From Functional Matter to Emergence</h3>
                <div style="width: 100%; max-width: 1200px; display: flex; justify-content: center; margin-bottom: 1em;"></div>
                <p style="text-align: justify; width: 100%; max-width: 1200px; font-size: 1.2rem;">By orchestrating structure and responsiveness across scales, we enable materials to exhibit higher-order functions—such as memory, adaptation, and selective response—rooted in their physical architecture.</p>
              </div>
              <!-- Cartoon absolutely positioned on the far right -->
              <div style="position: absolute; right: -140px; top:70%; transform: translateY(-50%); z-index: 0; width: 430px; height: auto; display: flex; align-items: center; justify-content: flex-start; pointer-events: none;">
                <img src="images/sec3_cartoon.png" alt="Section 3 Cartoon" style="max-width: 530px; width: 530px; height: auto; background: none; border-radius: 0; box-shadow: none; display: block; margin: auto 0;" />
              </div>
            </div>
          </div>
          <div class="carousel-text">
            <div style="margin: 0 auto; display: flex; flex-direction: column; align-items: center; justify-content: center; max-width: 900px; width: 100%;">
              <h3 style="margin-bottom: 0.7em; text-align: center; width: 100%; font-size: 3rem; color: #1b7c4b; font-family: 'Segoe UI', 'Arial', sans-serif; letter-spacing: 0.01em; text-shadow: 0 2px 12px #1b7c4b, 0 2px 12px #000; font-weight: 600;">From New Voices to New Directions</h3>
              <div style="width: 100%; max-width: 430px; display: flex; justify-content: center; margin-bottom: 1em;">
                <img src="images/sec5.png" alt="Section 5 Cartoon" style="max-width: 430px; width: 100%; height: auto; background: none; border-radius: 0; box-shadow: none; display: block; margin: 0 auto;" />
              </div>
              <p style="text-align: justify; width: 100%; max-width: 1200px; font-size: 1.2rem;">
                From molecules to materials to function—if that arc excites you, we want to hear from you. Join us in exploring what’s possible.
              </p>
            </div>
          </div>
          <div class="carousel-dots"></div>
        </div>
      </section>
      </main>
      
    
    <footer>
      <p>© 2025 SoftKnit Lab | Institute of Science and Technology Austria</p>
    </footer>
  <script>
    function toggleMenu() {
      const dropdownMenu = document.querySelector('.dropdown-menu');
      const toggleBtn = document.querySelector('.menu-toggle');
      const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
      if (!expanded) {
        dropdownMenu.classList.add('show');
        toggleBtn.setAttribute('aria-expanded', 'true');
      } else {
        dropdownMenu.classList.remove('show');
        toggleBtn.setAttribute('aria-expanded', 'false');
      }
    }

    // Only close the dropdown if clicked outside or on navigation
    document.addEventListener('mousedown', function(event) {
      const dropdownMenu = document.querySelector('.dropdown-menu');
      const toggleBtn = document.querySelector('.menu-toggle');
      if (dropdownMenu.classList.contains('show') && !dropdownMenu.contains(event.target) && !toggleBtn.contains(event.target)) {
        dropdownMenu.classList.remove('show');
        toggleBtn.setAttribute('aria-expanded', 'false');
      }
    });

    // Close menu on navigation
    document.querySelectorAll('.dropdown-menu a').forEach(link => {
      link.addEventListener('click', function() {
        const dropdownMenu = document.querySelector('.dropdown-menu');
        const toggleBtn = document.querySelector('.menu-toggle');
        dropdownMenu.classList.remove('show');
        toggleBtn.setAttribute('aria-expanded', 'false');
      });
    });

    document.addEventListener('DOMContentLoaded', function() {
      // Carousel logic (unchanged)
      const texts = document.querySelectorAll('.carousel-text');
      const dotsContainer = document.querySelector('.carousel-dots');
      let current = 0;
      texts.forEach((_, idx) => {
        const dot = document.createElement('div');
        dot.className = 'carousel-dot' + (idx === 0 ? ' active' : '');
        dot.addEventListener('click', () => {
          if (current !== idx) {
            animateCarouselOut(texts[current]);
            dotsContainer.children[current].classList.remove('active');
            current = idx;
            animateCarouselIn(texts[current]);
            dotsContainer.children[current].classList.add('active');
          }
        });
        dotsContainer.appendChild(dot);
      });
      function animateCarouselOut(el) {
        el.classList.remove('active');
        el.classList.add('out');
        setTimeout(() => {
          el.classList.remove('out');
          el.style.display = 'none';
        }, 700);
      }
      function animateCarouselIn(el) {
        // Set all slides to absolute and none except the active one
        texts.forEach(t => {
          t.style.position = 'absolute';
          t.style.display = 'none';
          t.classList.remove('active');
          t.classList.remove('out');
        });
        el.classList.add('active');
        el.style.display = 'flex';
        el.style.position = 'relative';
      }
      setInterval(() => {
        animateCarouselOut(texts[current]);
        dotsContainer.children[current].classList.remove('active');
        current = (current + 1) % texts.length;
        animateCarouselIn(texts[current]);
        dotsContainer.children[current].classList.add('active');
      }, 15000);

     function setBackgroundTransform() {
      const rot = Math.floor(Math.random() * 360);
      const angleRad = (rot % 360) * Math.PI / 180;

      const sin = Math.abs(Math.sin(angleRad));
      const cos = Math.abs(Math.cos(angleRad));

      const vw = window.innerWidth;
      const vh = window.innerHeight;

      const bg = document.querySelector('.background');
      const bgStatic = document.querySelector('.background-static');

      // Start with base size matching viewport
      const baseW = vw;
      const baseH = vh;

      // Calculate rotated bounding box dimensions
      const bboxW = baseW * cos + baseH * sin;
      const bboxH = baseW * sin + baseH * cos;

      // Add a small margin for safety
      const paddingFactor = 1.02;

      const adjustedW = bboxW * paddingFactor;
      const adjustedH = bboxH * paddingFactor;

      // Set the background size dynamically
      bg.style.width = `${adjustedW}px`;
      bg.style.height = `${adjustedH}px`;
      bgStatic.style.width = `${adjustedW}px`;
      bgStatic.style.height = `${adjustedH}px`;

      // Calculate the scale needed (if any)
      const scaleW = vw / bboxW;
      const scaleH = vh / bboxH;
      const scale = Math.max(scaleW, scaleH, 1);

      // Apply transform
      const transform = `translate(-50%, -50%) rotate(${rot}deg) scale(${scale})`;
      bg.style.transform = transform;
      bgStatic.style.transform = transform;
    }
      setBackgroundTransform();
      window.addEventListener('resize', setBackgroundTransform);
      // Listen for zoom (via resize, orientationchange, or visualViewport)
      if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', setBackgroundTransform);
      }
      // After 5s, swap to static background, keeping transform
      setTimeout(function() {
        document.querySelector('.background').style.display = 'none';
        document.querySelector('.background-static').style.display = 'block';
      }, 5000); // 5 seconds
    });
  </script>
</body>
</html>